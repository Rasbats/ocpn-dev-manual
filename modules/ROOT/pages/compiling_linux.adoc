= Compiling on Linux
image::opencpn_dev_linux_0.png[width=50]

*Instructions aimed at Debian/Ubuntu 

==  Install build dependencies

----
    $ sudo apt install  devscripts equivs
    $ sudo mk-build-deps -i -r ci/control
----

For Ubuntu-focal :

----
    $ sudo apt install  devscripts equivs
    $ sudo mk-build-deps -i -r ci/control-focal-gtk3
----

Notes: 

* On Debian Buster and Ubuntu Bionic it is possible to build OpenCPN linked
against gtk2 or gtk3. The default alternative is to use gtk2.

* The build setup is generally updated for Debian releases and Ubuntu LTS 
releases.



== Optional: Remove old installation

----
    $ sudo apt-get remove opencpn
----


== Download source code


----
    $ git clone git://github.com/OpenCPN/OpenCPN.git
----

== 3. Build it

We'll build everything in a subdirectory to keep the codebase clean
(easier to catch changes).

----
    $ cd OpenCPN   
    $ mkdir build
    $ cd build
    $ cmake ../
    $ make
----

=== Notes:

* Default install dir is /usr/local, you can change this by providing
the appropriate option to cmake:

----
$ cmake -DCMAKE_INSTALL_PREFIX=/usr ../

----


* cmake is only required if you build source code for the first time,
then running make is enough, even if you updated the source code.

== 4. Install it or create a package

----
    $ sudo make install
----

OR you could do this, to make your own .deb  package:

----
    $ make package
----


== 5. IDEs for Linux to work on OpenCPN

It is possible to use various IDEs to edit OpenCPN's code on Linux.
Choosing one of *http://www.codeblocks.org/[Code::Blocks]*,
**http://kdevelop.org/[KDevelop]**and *http://eclipse.org/cdt/[Eclipse]*
**http://eclipse.org/cdt/[CDT]** simplifies since  as cmake supports
generating their project files. For this, replace the cmake configuration
step with one of the following, corresponding to the IDE of your choice.
In all cases it will still be possible to do the commandline build as
described above.

----
    $ cmake -G "CodeBlocks - Unix Makefiles" ../
----

----
    $ cmake -G "KDevelop3 - Unix Makefiles" ../
----

----
    $ cmake -G "Eclipse CDT4 - Unix Makefiles" ../
----

To prototype the GUI parts of the application, have a look a
https://sourceforge.net/projects/wxformbuilder/[wxFormBuilder].

In order to be able to run OpenCPN from inside the IDE without having it
installed, you must copy the following folders from the *data* subfolder
of the source tree to your *build* folder: *gshhs*, *s57data*, *tcdata*.
You also must create a subfolder *uidata* in the build folder and copy
the following files from *src/bitmaps* into it: *styles.xml*,
{empty}*toolicons_journeyman_flat.png*, *toolicons_journeyman.png*,
{empty}*toolicons_traditional.png, plus.svg*. You should also copy
{empty}*authors.html* and *license.html* from */data* to your 'build' folder.
Then to ensure that your 'build' folder is used as the 'source' for the
run/debug session you need to ensure that OpenCPN is started with '-p'
as a parameter. This sets OpenCPN into 'portable' mode and therefore
looks in the location the 'opencpn' executable is run from, i.e. your
'build' directory.
